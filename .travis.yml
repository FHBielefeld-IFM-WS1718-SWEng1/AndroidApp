language: android
android:
  components:
  - tools
  - platform-tools
  - tools
  - build-tools-26.0.2
  - android-26
  - sys-img-armeabi-v7a-android-19
before_script:
  - chmod +x gradlew
  - -avd Nexus_5X_API_23 -wipe-data
  - -avd Nexus_5X_API_23 -wipe-data & EMULATOR_PID=$!

before_install:
  - pip install --user codecov
  
script:
  - android-wait-for-emulator
  - adb shell input keyevent 82 &
  - ./gradlew connectedAndroidTest -i
  - ./gradlew assemble
  - ./gradlew connectedAndroidTest -PdisablePreDex --stacktrace
